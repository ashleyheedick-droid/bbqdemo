<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Online | Smoke Sessions</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-darkest: #0d0806;
      --bg-dark: #1a120e;
      --bg-card: #221a14;
      --bg-card-hover: #2d2118;
      --smoke-brown: #8B4513;
      --deep-hickory: #3E1A00;
      --fire-orange: #E25822;
      --gold: #DAA520;
      --gold-light: #F0C050;
      --ember-red: #C41E3A;
      --text-primary: #F5E6D3;
      --text-secondary: #B8A08A;
      --text-muted: #8B7B6B;
      --border-color: rgba(218,165,32,0.15);
      --border-glow: rgba(218,165,32,0.3);
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-darkest);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(ellipse at 20% 50%, rgba(139,69,19,0.08) 0%, transparent 60%),
        radial-gradient(ellipse at 80% 20%, rgba(226,88,34,0.05) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 80%, rgba(62,26,0,0.1) 0%, transparent 60%);
      pointer-events: none;
      z-index: 0;
    }

    /* ---- Layout ---- */
    .page-wrapper {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .main-content {
      flex: 1;
      max-width: 960px;
      margin: 0 auto;
      padding: 0 16px 120px;
      width: 100%;
    }

    /* ---- Top Nav ---- */
    .top-nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(13,8,6,0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border-color);
      padding: 0 16px;
    }

    .top-nav-inner {
      max-width: 960px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 60px;
    }

    .brand-name {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 20px;
      letter-spacing: 2px;
      color: var(--gold);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .nav-link {
      font-family: 'Montserrat', sans-serif;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .nav-link:hover {
      color: var(--gold);
    }

    .cart-toggle-btn {
      position: relative;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      font-family: 'Montserrat', sans-serif;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--bg-darkest);
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .cart-toggle-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(218,165,32,0.4);
    }

    .cart-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 20px;
      height: 20px;
      padding: 0 5px;
      font-size: 11px;
      font-weight: 700;
      color: #fff;
      background: var(--fire-orange);
      border-radius: 10px;
    }

    .cart-badge.empty {
      display: none;
    }

    /* ---- Header ---- */
    .page-header {
      text-align: center;
      padding: 36px 0 28px;
    }

    .page-header h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 48px;
      letter-spacing: 3px;
      color: var(--text-primary);
      line-height: 1.1;
      margin-bottom: 6px;
    }

    .page-header .subtitle {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: 18px;
      color: var(--text-secondary);
    }

    /* ---- Category Tabs ---- */
    .category-tabs {
      display: flex;
      gap: 6px;
      overflow-x: auto;
      padding: 0 0 16px;
      margin-bottom: 24px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .category-tabs::-webkit-scrollbar {
      display: none;
    }

    .category-tab {
      flex-shrink: 0;
      padding: 10px 20px;
      font-family: 'Montserrat', sans-serif;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      color: var(--text-secondary);
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .category-tab:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-glow);
      color: var(--text-primary);
    }

    .category-tab.active {
      background: linear-gradient(135deg, var(--fire-orange), var(--gold));
      border-color: transparent;
      color: var(--bg-darkest);
    }

    /* ---- Menu Grid ---- */
    .menu-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 32px;
    }

    .menu-item-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 14px;
      padding: 20px;
      transition: all 0.3s ease;
    }

    .menu-item-card:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-glow);
      transform: translateY(-1px);
    }

    .menu-item-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 6px;
    }

    .menu-item-name {
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      flex: 1;
      margin-right: 12px;
    }

    .menu-item-price {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 22px;
      color: var(--gold-light);
      letter-spacing: 1px;
      white-space: nowrap;
    }

    .menu-item-unit {
      font-family: 'Inter', sans-serif;
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 400;
      letter-spacing: 0;
    }

    .menu-item-desc {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 16px;
      line-height: 1.4;
    }

    .menu-item-actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .qty-control {
      display: flex;
      align-items: center;
      gap: 0;
      background: var(--bg-darkest);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }

    .qty-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 600;
      color: var(--text-secondary);
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .qty-btn:hover {
      color: var(--gold);
      background: var(--bg-card-hover);
    }

    .qty-btn:active {
      transform: scale(0.9);
    }

    .qty-value {
      width: 36px;
      text-align: center;
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      border-left: 1px solid var(--border-color);
      border-right: 1px solid var(--border-color);
      height: 36px;
      line-height: 36px;
    }

    .add-to-cart-btn {
      flex: 1;
      padding: 10px 16px;
      font-family: 'Montserrat', sans-serif;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      color: var(--bg-darkest);
      background: linear-gradient(135deg, var(--fire-orange), var(--gold));
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .add-to-cart-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(226,88,34,0.35);
    }

    .add-to-cart-btn:active {
      transform: scale(0.97);
    }

    .add-to-cart-btn.added {
      background: linear-gradient(135deg, #2a7d2a, #3da33d);
      animation: addPulse 0.4s ease;
    }

    @keyframes addPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    /* ---- Cart Sidebar ---- */
    .cart-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 500;
    }

    .cart-overlay.open {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -420px;
      width: 100%;
      max-width: 400px;
      height: 100%;
      background: var(--bg-dark);
      border-left: 1px solid var(--border-glow);
      z-index: 600;
      display: flex;
      flex-direction: column;
      transition: right 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: -8px 0 32px rgba(0,0,0,0.5);
    }

    .cart-sidebar.open {
      right: 0;
    }

    .cart-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .cart-header h2 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 28px;
      letter-spacing: 2px;
      color: var(--text-primary);
    }

    .cart-close-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: var(--text-muted);
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cart-close-btn:hover {
      color: var(--text-primary);
      border-color: var(--text-muted);
    }

    .cart-items-list {
      flex: 1;
      overflow-y: auto;
      padding: 16px 24px;
    }

    .cart-empty-msg {
      text-align: center;
      padding: 48px 16px;
    }

    .cart-empty-msg .empty-icon {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.4;
    }

    .cart-empty-msg p {
      font-size: 14px;
      color: var(--text-muted);
    }

    .cart-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .cart-item-info {
      flex: 1;
      min-width: 0;
    }

    .cart-item-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .cart-item-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 0;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      overflow: hidden;
    }

    .cart-item-qty button {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-secondary);
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cart-item-qty button:hover {
      color: var(--gold);
      background: var(--bg-card-hover);
    }

    .cart-item-qty span {
      width: 28px;
      text-align: center;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-primary);
      border-left: 1px solid var(--border-color);
      border-right: 1px solid var(--border-color);
    }

    .cart-item-subtotal {
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      font-weight: 600;
      color: var(--gold-light);
      min-width: 52px;
      text-align: right;
    }

    .cart-item-remove {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: var(--text-muted);
      background: transparent;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cart-item-remove:hover {
      color: var(--ember-red);
      background: rgba(196,30,58,0.15);
    }

    /* Cart Footer / Totals */
    .cart-footer {
      flex-shrink: 0;
      border-top: 1px solid var(--border-glow);
      padding: 20px 24px;
      background: var(--bg-card);
    }

    .cart-total-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
    }

    .cart-total-row .total-label {
      font-family: 'Inter', sans-serif;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .cart-total-row .total-value {
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .cart-total-row.grand-total {
      padding-top: 12px;
      margin-top: 8px;
      border-top: 1px solid var(--border-glow);
    }

    .cart-total-row.grand-total .total-label {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 20px;
      letter-spacing: 2px;
      color: var(--text-primary);
    }

    .cart-total-row.grand-total .total-value {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 24px;
      letter-spacing: 1px;
      color: var(--gold-light);
    }

    .place-order-btn {
      width: 100%;
      padding: 16px;
      margin-top: 16px;
      font-family: 'Bebas Neue', sans-serif;
      font-size: 20px;
      letter-spacing: 3px;
      color: var(--bg-darkest);
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .place-order-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }

    .place-order-btn:hover::before {
      left: 100%;
    }

    .place-order-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(218,165,32,0.4);
    }

    .place-order-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .place-order-btn:disabled:hover::before {
      left: -100%;
    }

    /* ---- Order Form Modal ---- */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 700;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .modal-overlay.open {
      display: flex;
      animation: fadeIn 0.3s ease;
    }

    .modal-content {
      width: 100%;
      max-width: 480px;
      max-height: 90vh;
      background: var(--bg-dark);
      border: 1px solid var(--border-glow);
      border-radius: 20px;
      overflow-y: auto;
      animation: modalSlideUp 0.4s ease;
    }

    @keyframes modalSlideUp {
      from {
        opacity: 0;
        transform: translateY(32px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px 24px 0;
    }

    .modal-header h2 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 32px;
      letter-spacing: 2px;
      color: var(--text-primary);
    }

    .modal-close-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: var(--text-muted);
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .modal-close-btn:hover {
      color: var(--text-primary);
      border-color: var(--text-muted);
    }

    .modal-body {
      padding: 24px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-family: 'Montserrat', sans-serif;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .form-label .optional-tag {
      font-weight: 400;
      font-size: 10px;
      color: var(--text-muted);
      text-transform: none;
      letter-spacing: 0;
      margin-left: 6px;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      font-family: 'Inter', sans-serif;
      font-size: 15px;
      color: var(--text-primary);
      background: var(--bg-card);
      border: 1.5px solid var(--border-color);
      border-radius: 10px;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .form-input::placeholder {
      color: var(--text-muted);
      font-size: 14px;
    }

    .form-input:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(218,165,32,0.15);
    }

    select.form-input {
      appearance: none;
      -webkit-appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%238B7B6B' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      padding-right: 40px;
      cursor: pointer;
    }

    textarea.form-input {
      resize: vertical;
      min-height: 70px;
      max-height: 140px;
    }

    .modal-submit-btn {
      width: 100%;
      padding: 16px;
      font-family: 'Bebas Neue', sans-serif;
      font-size: 20px;
      letter-spacing: 3px;
      color: var(--bg-darkest);
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 8px;
    }

    .modal-submit-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(218,165,32,0.4);
    }

    .modal-submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* ---- Order Confirmation Screen ---- */
    .confirmation-screen {
      display: none;
      text-align: center;
      padding: 60px 24px;
    }

    .confirmation-screen.visible {
      display: block;
      animation: fadeInUp 0.6s ease forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(24px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .confirm-checkmark {
      width: 100px;
      height: 100px;
      margin: 0 auto 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      display: flex;
      align-items: center;
      justify-content: center;
      animation: popIn 0.5s ease 0.2s both;
      box-shadow: 0 4px 32px rgba(218,165,32,0.4);
    }

    @keyframes popIn {
      0% { transform: scale(0); opacity: 0; }
      70% { transform: scale(1.15); }
      100% { transform: scale(1); opacity: 1; }
    }

    .confirm-checkmark svg {
      width: 48px;
      height: 48px;
    }

    .confirm-checkmark svg polyline {
      stroke: var(--bg-darkest);
      stroke-width: 4;
      stroke-linecap: round;
      stroke-linejoin: round;
      fill: none;
      stroke-dasharray: 50;
      stroke-dashoffset: 50;
      animation: drawCheck 0.5s ease 0.6s forwards;
    }

    @keyframes drawCheck {
      to { stroke-dashoffset: 0; }
    }

    .confirmation-screen h2 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 40px;
      letter-spacing: 2px;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .confirmation-screen .confirm-subtitle {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 32px;
    }

    .confirm-details {
      background: var(--bg-card);
      border: 1px solid var(--border-glow);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 32px;
      max-width: 420px;
      margin-left: auto;
      margin-right: auto;
    }

    .confirm-detail-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .confirm-detail-row:last-child {
      border-bottom: none;
    }

    .confirm-detail-row .cd-label {
      font-family: 'Montserrat', sans-serif;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .confirm-detail-row .cd-value {
      font-family: 'Inter', sans-serif;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .confirm-detail-row .cd-value.highlight {
      color: var(--gold-light);
      font-size: 18px;
    }

    .confirm-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-width: 420px;
      margin: 0 auto;
    }

    .new-order-btn {
      padding: 16px;
      font-family: 'Bebas Neue', sans-serif;
      font-size: 20px;
      letter-spacing: 3px;
      color: var(--bg-darkest);
      background: linear-gradient(135deg, var(--fire-orange), var(--gold));
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .new-order-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(226,88,34,0.4);
    }

    .confirm-home-link {
      display: block;
      padding: 14px;
      font-family: 'Montserrat', sans-serif;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--text-muted);
      text-decoration: none;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .confirm-home-link:hover {
      color: var(--gold);
      border-color: var(--border-glow);
    }

    /* ---- Spinner ---- */
    .spinner {
      display: inline-block;
      width: 18px;
      height: 18px;
      border: 3px solid rgba(13,8,6,0.3);
      border-top-color: var(--bg-darkest);
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      vertical-align: middle;
      margin-right: 6px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ---- Error Message ---- */
    .form-error {
      background: rgba(196,30,58,0.15);
      border: 1px solid rgba(196,30,58,0.3);
      border-radius: 8px;
      padding: 10px 14px;
      margin-bottom: 16px;
      font-size: 13px;
      color: #ff6b7f;
      display: none;
    }

    .form-error.visible {
      display: block;
      animation: shake 0.4s ease;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }

    /* ---- Staff Portal ---- */
    .staff-portal-bar {
      background: linear-gradient(180deg, rgba(13,8,6,0.95), #0a0604);
      border-top: 1px solid rgba(218,165,32,0.08);
      text-align: center;
    }

    .staff-portal-toggle {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 12px 24px;
      font-family: 'Montserrat', sans-serif;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--text-muted);
      cursor: pointer;
      background: none;
      border: none;
      opacity: 0.5;
      transition: color 0.3s, opacity 0.3s;
    }

    .staff-portal-toggle:hover { color: var(--gold); opacity: 0.8; }

    .staff-portal-toggle .toggle-arrow {
      display: inline-block;
      transition: transform 0.3s;
      font-size: 8px;
    }

    .staff-portal-toggle.open .toggle-arrow { transform: rotate(180deg); }

    .staff-portal-links {
      display: none;
      padding: 0 24px 20px;
      max-width: 800px;
      margin: 0 auto;
    }

    .staff-portal-links.open { display: block; }

    .staff-portal-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    @media (min-width: 520px) {
      .staff-portal-grid { grid-template-columns: repeat(4, 1fr); }
    }

    .staff-link {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      padding: 16px 12px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      text-decoration: none;
      transition: all 0.3s;
    }

    .staff-link:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-glow);
      transform: translateY(-2px);
    }

    .staff-link-icon { font-size: 1.4rem; line-height: 1; }

    .staff-link-label {
      font-family: 'Montserrat', sans-serif;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--text-secondary);
      text-align: center;
    }

    .staff-link:hover .staff-link-label { color: var(--gold); }

    /* ---- Footer ---- */
    .footer {
      text-align: center;
      padding: 24px 16px;
      border-top: 1px solid var(--border-color);
    }

    .footer p {
      font-size: 12px;
      color: var(--text-muted);
    }

    .footer a {
      color: var(--gold);
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* ---- Responsive ---- */
    @media (min-width: 520px) {
      .menu-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }

      .page-header h1 {
        font-size: 56px;
      }
    }

    @media (min-width: 768px) {
      .main-content {
        padding: 0 24px 80px;
      }

      .menu-grid {
        gap: 18px;
      }

      .cart-sidebar {
        max-width: 420px;
      }
    }

    @media (min-width: 960px) {
      .menu-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <!-- Top Nav -->
    <nav class="top-nav">
      <div class="top-nav-inner">
        <a href="#" class="brand-name">Smoke Sessions</a>
        <div class="nav-links">
          <a href="waitlist-guest-form.html" class="nav-link">Waitlist</a>
          <a href="live-update-inventory.html" class="nav-link">Live Menu</a>
          <button class="cart-toggle-btn" onclick="toggleCart()">
            &#128722; Cart <span class="cart-badge empty" id="cartBadge">0</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
      <!-- Header -->
      <div class="page-header" id="pageHeader">
        <h1>Order Online</h1>
        <p class="subtitle">Pickup or Delivery</p>
      </div>

      <!-- Category Tabs -->
      <div class="category-tabs" id="categoryTabs"></div>

      <!-- Menu Grid -->
      <div class="menu-grid" id="menuGrid"></div>
    </main>

    <!-- Confirmation Screen -->
    <div class="confirmation-screen" id="confirmationScreen">
      <div class="confirm-checkmark">
        <svg viewBox="0 0 48 48">
          <polyline points="12,26 20,34 36,16" />
        </svg>
      </div>
      <h2>Order Confirmed!</h2>
      <p class="confirm-subtitle">We're firing up the pit for you</p>
      <div class="confirm-details">
        <div class="confirm-detail-row">
          <span class="cd-label">Order #</span>
          <span class="cd-value highlight" id="confirmOrderNum">--</span>
        </div>
        <div class="confirm-detail-row">
          <span class="cd-label">Name</span>
          <span class="cd-value" id="confirmName">--</span>
        </div>
        <div class="confirm-detail-row">
          <span class="cd-label">Pickup Time</span>
          <span class="cd-value" id="confirmPickup">--</span>
        </div>
        <div class="confirm-detail-row">
          <span class="cd-label">Total</span>
          <span class="cd-value highlight" id="confirmTotal">--</span>
        </div>
      </div>
      <div class="confirm-actions">
        <button class="new-order-btn" onclick="startNewOrder()">Start a New Order</button>
        <a href="waitlist-guest-form.html" class="confirm-home-link">Join the Waitlist</a>
      </div>
    </div>

    <!-- Staff Portal -->
    <div class="staff-portal-bar">
      <button class="staff-portal-toggle" id="staffToggle" onclick="document.getElementById('staffToggle').classList.toggle('open');document.getElementById('staffLinks').classList.toggle('open');">
        Staff Portal <span class="toggle-arrow">&#9660;</span>
      </button>
      <div class="staff-portal-links" id="staffLinks">
        <div class="staff-portal-grid">
          <a href="kitchen-display.html" class="staff-link">
            <span class="staff-link-icon">&#127859;</span>
            <span class="staff-link-label">Kitchen Display</span>
          </a>
          <a href="waitlist-host-view.html" class="staff-link">
            <span class="staff-link-icon">&#128203;</span>
            <span class="staff-link-label">Waitlist Host</span>
          </a>
          <a href="manager-dashboard.html" class="staff-link">
            <span class="staff-link-icon">&#128202;</span>
            <span class="staff-link-label">Manager Dashboard</span>
          </a>
          <a href="pit-control-center.html" class="staff-link">
            <span class="staff-link-icon">&#128293;</span>
            <span class="staff-link-label">Pit Control</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>&copy; 2026 Smoke Sessions  -  <a href="waitlist-guest-form.html">Join the Waitlist</a></p>
    </div>
  </div>

  <!-- Cart Overlay -->
  <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>

  <!-- Cart Sidebar -->
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h2>Your Cart</h2>
      <button class="cart-close-btn" onclick="toggleCart()">&times;</button>
    </div>
    <div class="cart-items-list" id="cartItemsList">
      <div class="cart-empty-msg" id="cartEmptyMsg">
        <div class="empty-icon">&#127830;</div>
        <p>Your cart is empty.<br>Add some BBQ goodness!</p>
      </div>
    </div>
    <div class="cart-footer" id="cartFooter" style="display:none;">
      <div class="cart-total-row">
        <span class="total-label">Subtotal</span>
        <span class="total-value" id="cartSubtotal">$0.00</span>
      </div>
      <div class="cart-total-row">
        <span class="total-label">Tax (8.25%)</span>
        <span class="total-value" id="cartTax">$0.00</span>
      </div>
      <div class="cart-total-row grand-total">
        <span class="total-label">Total</span>
        <span class="total-value" id="cartTotal">$0.00</span>
      </div>
      <button class="place-order-btn" id="placeOrderBtn" onclick="openOrderForm()">
        Place Order
      </button>
    </div>
  </div>

  <!-- Order Form Modal -->
  <div class="modal-overlay" id="orderFormModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Complete Your Order</h2>
        <button class="modal-close-btn" onclick="closeOrderForm()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-error" id="orderFormError"></div>

        <div class="form-group">
          <label class="form-label" for="orderName">Your Name</label>
          <input type="text" id="orderName" class="form-input" placeholder="e.g. John Smith" autocomplete="name">
        </div>

        <div class="form-group">
          <label class="form-label" for="orderPhone">Phone Number</label>
          <input type="tel" id="orderPhone" class="form-input" placeholder="(555) 123-4567" autocomplete="tel">
        </div>

        <div class="form-group">
          <label class="form-label" for="orderPickupTime">Pickup Time</label>
          <select id="orderPickupTime" class="form-input">
            <!-- populated by JS -->
          </select>
        </div>

        <div class="form-group">
          <label class="form-label" for="orderInstructions">
            Special Instructions <span class="optional-tag">(optional)</span>
          </label>
          <textarea id="orderInstructions" class="form-input" placeholder="Extra sauce on the side, no onions, etc."></textarea>
        </div>

        <button class="modal-submit-btn" id="submitOrderBtn" onclick="submitOrder()">
          Confirm Order
        </button>
      </div>
    </div>
  </div>

  <script src="holysmokes-api.js"></script>
  <script>
    // ============================================================
    // MENU DATA
    // ============================================================
    var MENU_DATA = [
      // Smoked Meats
      { id: 'sm-1', name: 'Brisket', category: 'Smoked Meats', price: 26, unit: '/lb', description: 'Prime beef brisket, 14-hr post oak smoke' },
      { id: 'sm-2', name: 'Pulled Pork', category: 'Smoked Meats', price: 18, unit: '/lb', description: 'Pork shoulder, slow-smoked 12 hours' },
      { id: 'sm-3', name: 'Spare Ribs', category: 'Smoked Meats', price: 22, unit: '/lb', description: 'St. Louis-style spare ribs' },
      { id: 'sm-4', name: 'Turkey Breast', category: 'Smoked Meats', price: 20, unit: '/lb', description: 'Herb-brined smoked turkey' },
      { id: 'sm-5', name: 'Sausage Links', category: 'Smoked Meats', price: 16, unit: '/lb', description: 'House-made beef & pork sausage' },
      { id: 'sm-6', name: 'Beef Ribs', category: 'Smoked Meats', price: 32, unit: '/lb', description: 'Dino beef ribs, 10-hr smoke' },
      // Plates
      { id: 'pl-1', name: 'Brisket Plate', category: 'Plates', price: 19, unit: '', description: 'Sliced brisket, 2 sides & cornbread' },
      { id: 'pl-2', name: 'Pulled Pork Plate', category: 'Plates', price: 15, unit: '', description: 'Pulled pork, 2 sides & cornbread' },
      { id: 'pl-3', name: 'Rib Plate', category: 'Plates', price: 18, unit: '', description: 'Half rack of ribs, 2 sides & cornbread' },
      { id: 'pl-4', name: 'Turkey Plate', category: 'Plates', price: 16, unit: '', description: 'Smoked turkey, 2 sides & cornbread' },
      { id: 'pl-5', name: 'Combo (2 Meats)', category: 'Plates', price: 22, unit: '', description: 'Pick any 2 meats, 2 sides & cornbread' },
      { id: 'pl-6', name: "Pitmaster's Pick", category: 'Plates', price: 28, unit: '', description: '3 meats, 3 sides, cornbread & a drink' },
      // Specialty
      { id: 'sp-1', name: 'Brisket Burger', category: 'Specialty', price: 16, unit: '', description: 'Smoked brisket patty, pickles & onion ring' },
      { id: 'sp-2', name: 'Brisket Egg Rolls', category: 'Specialty', price: 12, unit: '', description: 'Smoked brisket, pepper jack & pickled jalapenos' },
      { id: 'sp-3', name: 'Loaded Nachos', category: 'Specialty', price: 14, unit: '', description: 'Pulled pork or brisket on house chips' },
      { id: 'sp-4', name: 'Smoked Wings', category: 'Specialty', price: 13, unit: '', description: 'Pit-smoked wings tossed in your choice of sauce' },
      { id: 'sp-5', name: 'Burnt Ends', category: 'Specialty', price: 18, unit: '', description: 'Crispy smoked brisket burnt ends with pickles' },
      // Sides
      { id: 'si-1', name: 'Mac & Cheese', category: 'Sides', price: 5, unit: '', description: 'Three-cheese blend, smoked gouda' },
      { id: 'si-2', name: 'Coleslaw', category: 'Sides', price: 4, unit: '', description: 'Tangy vinegar-based slaw' },
      { id: 'si-3', name: 'Baked Beans', category: 'Sides', price: 5, unit: '', description: 'Slow-cooked with burnt ends' },
      { id: 'si-4', name: 'Potato Salad', category: 'Sides', price: 4, unit: '', description: 'Classic mustard potato salad' },
      { id: 'si-5', name: 'Corn Pudding', category: 'Sides', price: 5, unit: '', description: 'Sweet corn casserole' },
      { id: 'si-6', name: 'Jalapeno Cornbread', category: 'Sides', price: 4, unit: '', description: 'Cast-iron skillet cornbread' },
      { id: 'si-7', name: 'Collard Greens', category: 'Sides', price: 5, unit: '', description: 'Braised with smoked ham hock' },
      { id: 'si-8', name: 'Fried Okra', category: 'Sides', price: 5, unit: '', description: 'Cornmeal-crusted & fried crispy' },
      // Desserts
      { id: 'de-1', name: 'Pecan Pie', category: 'Desserts', price: 7, unit: '', description: 'Classic Texas pecan pie' },
      { id: 'de-2', name: 'Banana Pudding', category: 'Desserts', price: 6, unit: '', description: 'Homemade vanilla wafer pudding' },
      { id: 'de-3', name: 'Smoked Peach Cobbler', category: 'Desserts', price: 8, unit: '', description: 'Wood-fired peach cobbler a la mode' },
      // Drinks
      { id: 'dr-1', name: 'Sweet Tea', category: 'Drinks', price: 3, unit: '', description: 'Classic Southern sweet tea' },
      { id: 'dr-2', name: 'Lemonade', category: 'Drinks', price: 3, unit: '', description: 'Fresh-squeezed lemonade' },
      { id: 'dr-3', name: 'Craft Sodas', category: 'Drinks', price: 4, unit: '', description: 'Assorted craft & small-batch sodas' },
      { id: 'dr-4', name: 'Craft Beer', category: 'Drinks', price: 7, unit: '', description: 'Rotating selection of local craft brews' },
      { id: 'dr-5', name: 'Margarita', category: 'Drinks', price: 9, unit: '', description: 'House margarita with fresh lime' }
    ];

    var CATEGORIES = ['Smoked Meats', 'Plates', 'Specialty', 'Sides', 'Desserts', 'Drinks'];
    var TAX_RATE = 0.0825;

    // ============================================================
    // STATE
    // ============================================================
    var activeCategory = 'Smoked Meats';
    var cart = [];
    var itemQtys = {};  // per-card quantity selectors

    // Initialize item quantities
    MENU_DATA.forEach(function(item) { itemQtys[item.id] = 1; });

    // ============================================================
    // CART PERSISTENCE (localStorage via API helper)
    // ============================================================
    function loadCart() {
      var saved = HolySmokesBBQ._lsGet('cart');
      if (saved && Array.isArray(saved)) {
        cart = saved;
      }
      updateCartUI();
    }

    function saveCart() {
      HolySmokesBBQ._lsSet('cart', cart);
    }

    // ============================================================
    // RENDER: Category Tabs
    // ============================================================
    function renderCategoryTabs() {
      var container = document.getElementById('categoryTabs');
      container.innerHTML = '';
      CATEGORIES.forEach(function(cat) {
        var tab = document.createElement('button');
        tab.className = 'category-tab' + (cat === activeCategory ? ' active' : '');
        tab.textContent = cat;
        tab.addEventListener('click', function() {
          activeCategory = cat;
          renderCategoryTabs();
          renderMenuGrid();
        });
        container.appendChild(tab);
      });
    }

    // ============================================================
    // RENDER: Menu Grid
    // ============================================================
    function renderMenuGrid() {
      var container = document.getElementById('menuGrid');
      container.innerHTML = '';

      var items = MENU_DATA.filter(function(item) {
        return item.category === activeCategory;
      });

      items.forEach(function(item) {
        var card = document.createElement('div');
        card.className = 'menu-item-card';
        card.innerHTML =
          '<div class="menu-item-top">' +
            '<div class="menu-item-name">' + item.name + '</div>' +
            '<div class="menu-item-price">$' + item.price + '<span class="menu-item-unit">' + item.unit + '</span></div>' +
          '</div>' +
          '<div class="menu-item-desc">' + item.description + '</div>' +
          '<div class="menu-item-actions">' +
            '<div class="qty-control">' +
              '<button class="qty-btn" onclick="changeItemQty(\'' + item.id + '\', -1)">&#8722;</button>' +
              '<div class="qty-value" id="qty-' + item.id + '">' + (itemQtys[item.id] || 1) + '</div>' +
              '<button class="qty-btn" onclick="changeItemQty(\'' + item.id + '\', 1)">+</button>' +
            '</div>' +
            '<button class="add-to-cart-btn" id="atc-' + item.id + '" onclick="addToCart(\'' + item.id + '\')">Add to Cart</button>' +
          '</div>';
        container.appendChild(card);
      });
    }

    // ============================================================
    // ITEM QUANTITY (per card)
    // ============================================================
    function changeItemQty(itemId, delta) {
      var current = itemQtys[itemId] || 1;
      var next = current + delta;
      if (next < 1) next = 1;
      if (next > 20) next = 20;
      itemQtys[itemId] = next;
      var el = document.getElementById('qty-' + itemId);
      if (el) el.textContent = next;
    }

    // ============================================================
    // ADD TO CART
    // ============================================================
    function addToCart(itemId) {
      var item = MENU_DATA.find(function(m) { return m.id === itemId; });
      if (!item) return;

      var qty = itemQtys[itemId] || 1;

      // Check if item already in cart
      var existing = cart.find(function(c) { return c.id === itemId; });
      if (existing) {
        existing.qty += qty;
      } else {
        cart.push({
          id: item.id,
          name: item.name,
          price: item.price,
          unit: item.unit,
          qty: qty
        });
      }

      saveCart();
      updateCartUI();

      // Reset item qty on card
      itemQtys[itemId] = 1;
      var qtyEl = document.getElementById('qty-' + itemId);
      if (qtyEl) qtyEl.textContent = '1';

      // Button feedback
      var btn = document.getElementById('atc-' + itemId);
      if (btn) {
        btn.classList.add('added');
        var origText = btn.textContent;
        btn.textContent = 'Added!';
        setTimeout(function() {
          btn.classList.remove('added');
          btn.textContent = 'Add to Cart';
        }, 800);
      }
    }

    // ============================================================
    // CART: Update UI
    // ============================================================
    function updateCartUI() {
      var totalItems = cart.reduce(function(sum, c) { return sum + c.qty; }, 0);
      var badge = document.getElementById('cartBadge');
      badge.textContent = totalItems;
      badge.classList.toggle('empty', totalItems === 0);

      var listEl = document.getElementById('cartItemsList');
      var emptyMsg = document.getElementById('cartEmptyMsg');
      var footerEl = document.getElementById('cartFooter');

      if (cart.length === 0) {
        listEl.innerHTML = '<div class="cart-empty-msg" id="cartEmptyMsg"><div class="empty-icon">&#127830;</div><p>Your cart is empty.<br>Add some BBQ goodness!</p></div>';
        footerEl.style.display = 'none';
        return;
      }

      footerEl.style.display = '';

      var html = '';
      cart.forEach(function(item, index) {
        var subtotal = (item.price * item.qty).toFixed(2);
        html +=
          '<div class="cart-item">' +
            '<div class="cart-item-info">' +
              '<div class="cart-item-name">' + item.name + '</div>' +
              '<div class="cart-item-meta">$' + item.price + (item.unit || '') + ' each</div>' +
            '</div>' +
            '<div class="cart-item-qty">' +
              '<button onclick="updateCartQty(' + index + ', -1)">&#8722;</button>' +
              '<span>' + item.qty + '</span>' +
              '<button onclick="updateCartQty(' + index + ', 1)">+</button>' +
            '</div>' +
            '<div class="cart-item-subtotal">$' + subtotal + '</div>' +
            '<button class="cart-item-remove" onclick="removeCartItem(' + index + ')" title="Remove">&times;</button>' +
          '</div>';
      });
      listEl.innerHTML = html;

      // Totals
      var subtotal = cart.reduce(function(sum, c) { return sum + (c.price * c.qty); }, 0);
      var tax = subtotal * TAX_RATE;
      var total = subtotal + tax;

      document.getElementById('cartSubtotal').textContent = '$' + subtotal.toFixed(2);
      document.getElementById('cartTax').textContent = '$' + tax.toFixed(2);
      document.getElementById('cartTotal').textContent = '$' + total.toFixed(2);
    }

    function updateCartQty(index, delta) {
      if (index < 0 || index >= cart.length) return;
      cart[index].qty += delta;
      if (cart[index].qty < 1) {
        cart.splice(index, 1);
      }
      saveCart();
      updateCartUI();
    }

    function removeCartItem(index) {
      if (index < 0 || index >= cart.length) return;
      cart.splice(index, 1);
      saveCart();
      updateCartUI();
    }

    // ============================================================
    // CART: Toggle Sidebar
    // ============================================================
    function toggleCart() {
      var sidebar = document.getElementById('cartSidebar');
      var overlay = document.getElementById('cartOverlay');
      var isOpen = sidebar.classList.contains('open');

      if (isOpen) {
        sidebar.classList.remove('open');
        overlay.classList.remove('open');
        document.body.style.overflow = '';
      } else {
        sidebar.classList.add('open');
        overlay.classList.add('open');
        document.body.style.overflow = 'hidden';
      }
    }

    // ============================================================
    // ORDER FORM
    // ============================================================
    function generatePickupTimes() {
      var select = document.getElementById('orderPickupTime');
      select.innerHTML = '';

      var now = new Date();
      // Round up to next 15-minute interval and add 30 minutes for prep
      var minutes = now.getMinutes();
      var roundedUp = Math.ceil(minutes / 15) * 15;
      var startTime = new Date(now);
      startTime.setMinutes(roundedUp + 30);
      startTime.setSeconds(0);

      // Generate slots for next 3 hours
      for (var i = 0; i < 12; i++) {
        var slotTime = new Date(startTime.getTime() + (i * 15 * 60 * 1000));
        var hours = slotTime.getHours();
        var mins = slotTime.getMinutes();
        var ampm = hours >= 12 ? 'PM' : 'AM';
        var displayHours = hours % 12 || 12;
        var displayMins = mins < 10 ? '0' + mins : mins;
        var label = displayHours + ':' + displayMins + ' ' + ampm;

        var opt = document.createElement('option');
        opt.value = label;
        opt.textContent = label;
        if (i === 0) opt.textContent = label + ' (Earliest)';
        select.appendChild(opt);
      }
    }

    function openOrderForm() {
      if (cart.length === 0) return;
      toggleCart(); // close cart sidebar first
      generatePickupTimes();
      document.getElementById('orderFormModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeOrderForm() {
      document.getElementById('orderFormModal').classList.remove('open');
      document.body.style.overflow = '';
      hideOrderError();
    }

    function showOrderError(msg) {
      var el = document.getElementById('orderFormError');
      el.textContent = msg;
      el.classList.add('visible');
    }

    function hideOrderError() {
      document.getElementById('orderFormError').classList.remove('visible');
    }

    // Phone formatting
    var orderPhoneInput = document.getElementById('orderPhone');
    orderPhoneInput.addEventListener('input', function(e) {
      var val = e.target.value.replace(/\D/g, '');
      if (val.length > 10) val = val.substring(0, 10);
      if (val.length >= 7) {
        e.target.value = '(' + val.substring(0,3) + ') ' + val.substring(3,6) + '-' + val.substring(6);
      } else if (val.length >= 4) {
        e.target.value = '(' + val.substring(0,3) + ') ' + val.substring(3);
      } else if (val.length > 0) {
        e.target.value = '(' + val;
      }
    });

    // ============================================================
    // SUBMIT ORDER
    // ============================================================
    function submitOrder() {
      hideOrderError();

      var name = document.getElementById('orderName').value.trim();
      var phone = document.getElementById('orderPhone').value.trim();
      var pickupTime = document.getElementById('orderPickupTime').value;
      var instructions = document.getElementById('orderInstructions').value.trim();

      if (!name) {
        showOrderError('Please enter your name.');
        document.getElementById('orderName').focus();
        return;
      }

      if (!phone) {
        showOrderError('Please enter your phone number so we can contact you when your order is ready.');
        document.getElementById('orderPhone').focus();
        return;
      }

      // Disable submit
      var btn = document.getElementById('submitOrderBtn');
      btn.disabled = true;
      btn.innerHTML = '<span class="spinner"></span> Processing...';

      // Calculate totals
      var subtotal = cart.reduce(function(sum, c) { return sum + (c.price * c.qty); }, 0);
      var tax = subtotal * TAX_RATE;
      var total = subtotal + tax;

      // Generate order number
      var orderNum = 'HS-' + Math.floor(1000 + Math.random() * 9000);

      // Push order to Kitchen Display System (localStorage)
      var kdsOrder = {
        id: 'ORD' + Date.now(),
        number: orderNum,
        customer: name,
        items: cart.map(function(c) {
          return c.qty > 1 ? c.qty + 'x ' + c.name : c.name;
        }),
        special: instructions || '',
        status: 'new',
        placedAt: Date.now(),
        phone: phone,
        pickupTime: pickupTime,
        total: subtotal + (subtotal * TAX_RATE)
      };

      try {
        var kdsKey = 'holysmokes_kds_orders';
        var existing = [];
        var stored = localStorage.getItem(kdsKey);
        if (stored) existing = JSON.parse(stored);
        existing.push(kdsOrder);
        localStorage.setItem(kdsKey, JSON.stringify(existing));
      } catch (e) { /* silent */ }

      // Push order to Google Sheets via API
      HolySmokesBBQ.addOrder({
        number: orderNum,
        customer: name,
        phone: phone,
        items: cart.map(function(c) { return c.qty > 1 ? c.qty + 'x ' + c.name : c.name; }).join(', '),
        special: instructions || '',
        subtotal: subtotal.toFixed(2),
        tax: tax.toFixed(2),
        total: total.toFixed(2),
        pickupTime: pickupTime
      }, function() { /* fire and forget */ });

      // Simulate processing delay
      setTimeout(function() {
        // Close modal
        closeOrderForm();

        // Show confirmation
        document.getElementById('confirmOrderNum').textContent = orderNum;
        document.getElementById('confirmName').textContent = name;
        document.getElementById('confirmPickup').textContent = pickupTime;
        document.getElementById('confirmTotal').textContent = '$' + total.toFixed(2);

        document.getElementById('mainContent').style.display = 'none';
        document.getElementById('confirmationScreen').classList.add('visible');

        // Clear cart
        cart = [];
        saveCart();
        updateCartUI();

        // Reset form
        btn.disabled = false;
        btn.innerHTML = 'Confirm Order';
        document.getElementById('orderName').value = '';
        document.getElementById('orderPhone').value = '';
        document.getElementById('orderInstructions').value = '';

        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 1200);
    }

    // ============================================================
    // START NEW ORDER
    // ============================================================
    function startNewOrder() {
      document.getElementById('confirmationScreen').classList.remove('visible');
      document.getElementById('confirmationScreen').style.display = 'none';
      document.getElementById('mainContent').style.display = '';

      // Reset item quantities
      MENU_DATA.forEach(function(item) { itemQtys[item.id] = 1; });
      activeCategory = 'Smoked Meats';
      renderCategoryTabs();
      renderMenuGrid();

      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ============================================================
    // INIT
    // ============================================================
    loadCart();
    renderCategoryTabs();
    renderMenuGrid();
  </script>
</body>
</html>
